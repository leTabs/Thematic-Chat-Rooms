<!-- {% block title %}Small Talk Themantic Chat Rooms|Find Chat Romm{% endblock %} -->

<!-- altering the base (app wrapper) to the log in panel -->
{% extends 'base.html'%} {% block content %}
    <section>
        <!-- navigation bar -->
        <nav class="index-nav">
            <p class="index-title"><b>Small Talk</b></p>
            <div>
                <button class="preview">Preview</button>
                <button class="about">About</button>
                <!-- the form element, for logging out -->
                <form action="{{ url_for('logout') }}" method="POST" class="logout">
                    <button type="submit" id="logout">Log Out</button>
                </form>
            </div>

                <!-- moblie nav button -->
                <img src="{{ url_for('static', filename='bars-solid.svg') }}" alt="mobile navigation button" class="mobile-nav-btn">
                <!-- mobile navigation -->
                <div id="mobile-nav-window">
                    <p>Preview</p>
                    <p>About</p>
                    <form action="{{ url_for('logout') }}" method="POST" class="logout">
                        <button type="submit" id="logout">Log Out</button>
                    </form>
                    <button class="close-mobile-nav">close</button>
                </div>
        </nav>
        <!-- main section -->
        <main class="find-chat-main">
            <h2 class="statement" style="margin-top: 7rem;">Find a Theme</h2> 
            <section class="all-themes">
                    <form method="get"  acttion="{{url_for('find_chat')}}" action="{{url_for('chatting')}}" class="themes">
                        <!-- loop of all the themes -->
                        {% for user in usernames %}
                        <!-- an element with the theme and a "join" button -->
                        <p>
                            <span>{{user}}</span>
                            <button type="submit" class="joinButton" name="reciever" value="{{ loop.index }} {{user}}">
                                Join
                            </button>
                        </p>
                        {% endfor %}
                    </form>
            </section>


        </main>
    </section>

    <!-- Javascript inclusion -->
    <script type="text/javascript">

    // mobile nav button
    mobileNavButton = document.querySelector('.mobile-nav-btn')
    mobileNavWindow = document.getElementById('mobile-nav-window');
    mobileNavCloseButton = document.querySelector('.close-mobile-nav');
    allThemeContainer = document.querySelector('.all-themes');
    containerTitle = document.querySelector('.statement')


    mobileNavButton.addEventListener('click', ()=>{
        if(mobileNavWindow.style.display != 'block'){
        mobileNavWindow.style.display = 'block';
        allThemeContainer.style.filter = "blur(8px)";
        containerTitle.style.filter = "blur(8px)";
        mobileNavButton.style.transform = 'rotate(90deg)'
    };
    })

    const navWindowClosure = function(){
        mobileNavWindow.style.display = 'none';
        mobileNavWindow.style.transform = 'translate(-50%, -50%)';
        allThemeContainer.style.filter = "blur(0)"
        containerTitle.style.filter = "blur(0)";
    }

     mobileNavCloseButton.addEventListener('click',()=>{
        mobileNavWindow.style.transform = 'translate(-50%, 140%)';
        mobileNavButton.style.transform = 'rotate(180deg)'
        setTimeout(navWindowClosure, 300)
    })

    </script>
{% endblock %}
